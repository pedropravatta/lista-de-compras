<script>
    // Função para buscar receitas usando a chave API
    async function buscarReceitas() {
        const listaReceitas = document.getElementById('receitas-lista');
        listaReceitas.innerHTML = ''; // Limpa as receitas anteriores

        const listaInventario = Array.from(document.getElementById('lista-inventario').getElementsByTagName('li')).map(item => item.textContent.split(' - ')[0]);

        if (listaInventario.length === 0) {
            alert('Adicione ingredientes ao inventário antes de buscar receitas.');
            return;
        }

        // Converte o array de ingredientes em uma string separada por vírgulas
        const ingredientes = listaInventario.join(',');

        // Aqui está o endpoint e sua chave API
        const apiKey = '5816a49c37074249ac5877feb19a4edd';
        const apiUrl = `https://api.exemplo.com/search?ingredients=${ingredientes}&apiKey=${apiKey}`;  // Altere a URL da API conforme a documentação

        try {
            // Fazendo a requisição à API
            const response = await fetch(apiUrl);
            const data = await response.json();

            // Verifica se retornou receitas
            if (data && data.recipes && data.recipes.length > 0) {
                data.recipes.forEach(receita => {
                    const card = document.createElement('div');
                    card.classList.add('receita-card');

                    const img = document.createElement('img');
                    img.src = receita.image || 'https://via.placeholder.com/150';
                    card.appendChild(img);

                    const nome = document.createElement('h3');
                    nome.textContent = receita.title;
                    card.appendChild(nome);

                    const ingredientesSection = document.createElement('div');
                    ingredientesSection.classList.add('ingredientes-section');

                    receita.ingredients.forEach(ingrediente => {
                        const p = document.createElement('p');
                        if (listaInventario.includes(ingrediente)) {
                            p.textContent = ingrediente + ' ✔️';
                            p.classList.add('ingrediente-possui');
                        } else {
                            p.textContent = ingrediente + ' ❌';
                            p.classList.add('ingrediente-falta');
                        }
                        ingredientesSection.appendChild(p);
                    });

                    card.appendChild(ingredientesSection);
                    listaReceitas.appendChild(card);
                });
            } else {
                listaReceitas.innerHTML = '<p>Nenhuma receita encontrada para os ingredientes informados.</p>';
            }
        } catch (error) {
            console.error('Erro ao buscar receitas:', error);
            listaReceitas.innerHTML = '<p>Ocorreu um erro ao buscar as receitas. Tente novamente mais tarde.</p>';
        }
    }
</script>
